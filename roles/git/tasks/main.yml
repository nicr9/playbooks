---
- include: "RedHat.yml"
  when: ansible_os_family == "RedHat"
- include: "Debian.yml"
  when: ansible_os_family == "Debian"

- name: Configure git
  template:
    src: "{{ item.src }}"
    dest: "{{ home }}/{{ item.dest }}"
  loop:
  - { src: 'dotgitconfig.j2', dest: '.gitconfig' }
  - { src: 'dotgitignore.j2', dest: '.gitignore' }

- name: Checkout git repos - SSH
  git:
    repo: git@github.com:{{ item }}.git
    dest: "{{ src }}/github.com/{{ item }}"
    accept_hostkey: yes
  loop: "{{ git_repos_ssh }}"

- name: Checkout git repos - HTTPS
  git:
    repo: "https://github.com/{{ item }}.git"
    dest: "{{ src }}/github.com/{{ item }}"
  loop: "{{ git_repos_https }}"
